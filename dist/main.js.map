{"version":3,"file":"main.js","sources":["../src/tokens/index.ts"],"sourcesContent":["class Token {\n  constructor(public type: string, public value: string) {}\n}\n\ninterface TokenizationStrategy {\n  matches(line: string): boolean\n  tokenize(line: string): Token\n}\n\n// 1～4级标题\nclass HeaderStrategy implements TokenizationStrategy {\n  private regex = /^(#{1,4})\\s+(.*)$/\n\n  matches(line: string): boolean {\n    return this.regex.test(line)\n  }\n\n  tokenize(line: string): Token {\n    const match = line.match(this.regex)!\n    console.log(match)\n\n    return new Token(`header${match[1].length}`, match[2])\n  }\n}\n\nclass Tokenizer {\n  strategies: TokenizationStrategy[] = []\n\n  addStrategy(strategy: TokenizationStrategy) {\n    this.strategies.push(strategy)\n  }\n\n  tokenize(markdown: string): Token[] {\n    const tokens: Token[] = []\n    const lines = markdown.split('\\n')\n    lines.forEach((line) => {\n      let matched = false\n      for (const val of this.strategies) {\n        if (val.matches(line)) {\n          tokens.push(val.tokenize(line))\n          matched = true\n          break\n        }\n      }\n\n      if (!matched) {\n        tokens.push(new Token('text', line))\n      }\n    })\n    return tokens\n  }\n}\n\nconst tokenizer = new Tokenizer()\n\ntokenizer.addStrategy(new HeaderStrategy())\n\nconst res1 = tokenizer.tokenize('# Header1')\nconst res2 = tokenizer.tokenize('* List Item 1')\nconsole.log(res1, res2)\n"],"names":[],"mappings":"AAAA,MAAM,KAAK,CAAA;AACU,IAAA,IAAA;AAAqB,IAAA,KAAA;IAAxC,WAAmB,CAAA,IAAY,EAAS,KAAa,EAAA;QAAlC,IAAI,CAAA,IAAA,GAAJ,IAAI;QAAiB,IAAK,CAAA,KAAA,GAAL,KAAK;;AAC9C;AAOD;AACA,MAAM,cAAc,CAAA;IACV,KAAK,GAAG,mBAAmB;AAEnC,IAAA,OAAO,CAAC,IAAY,EAAA;QAClB,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;;AAG9B,IAAA,QAAQ,CAAC,IAAY,EAAA;QACnB,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAE;AACrC,QAAA,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;AAElB,QAAA,OAAO,IAAI,KAAK,CAAC,CAAS,MAAA,EAAA,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;;AAEzD;AAED,MAAM,SAAS,CAAA;IACb,UAAU,GAA2B,EAAE;AAEvC,IAAA,WAAW,CAAC,QAA8B,EAAA;AACxC,QAAA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC;;AAGhC,IAAA,QAAQ,CAAC,QAAgB,EAAA;QACvB,MAAM,MAAM,GAAY,EAAE;QAC1B,MAAM,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC;AAClC,QAAA,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,KAAI;YACrB,IAAI,OAAO,GAAG,KAAK;AACnB,YAAA,KAAK,MAAM,GAAG,IAAI,IAAI,CAAC,UAAU,EAAE;AACjC,gBAAA,IAAI,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;oBACrB,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;oBAC/B,OAAO,GAAG,IAAI;oBACd;;;YAIJ,IAAI,CAAC,OAAO,EAAE;gBACZ,MAAM,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;;AAExC,SAAC,CAAC;AACF,QAAA,OAAO,MAAM;;AAEhB;AAED,MAAM,SAAS,GAAG,IAAI,SAAS,EAAE;AAEjC,SAAS,CAAC,WAAW,CAAC,IAAI,cAAc,EAAE,CAAC;AAE3C,MAAM,IAAI,GAAG,SAAS,CAAC,QAAQ,CAAC,WAAW,CAAC;AAC5C,MAAM,IAAI,GAAG,SAAS,CAAC,QAAQ,CAAC,eAAe,CAAC;AAChD,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC"}